min_version = "2025.12.12"

[env]
# Use the project name derived from the current directory
PROJECT_NAME = "{{ config_root | basename }}"

# Automatic virtualenv activation
_.python.venv = { path = ".venv", create = true }

[tools]
python = "{{ get_env(name='PYTHON_VERSION', default='3.12') }}"
ruff = "latest"

[tasks.install]
description = "Install dependencies"
alias = "i"
run = [
  "python -m pip install --upgrade pip",
  "python -m pip install -e '.[build]'"
]

[tasks.build]
description = "Build package"
run = [
  "python -m pip install -e '.[build]'",
  "python -m build"
]

[tasks.run]
description = "Run the application"
run = "ai_sandbox"

[tasks.test]
description = "Run tests"
run = "python -m unittest discover -s tests"

[tasks.lint]
description = "Lint the code"
run = "ruff check"

[tasks.info]
description = "Print project information"
run = '''
echo "Project: $PROJECT_NAME"
echo "Virtual Environment: $VIRTUAL_ENV"
'''